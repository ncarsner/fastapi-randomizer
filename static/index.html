<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randomizer API</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8E%B2%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <div class="header-container">
            <h1>Randomizer API</h1>
            <div class="theme-toggle-container">
                <label class="theme-switch">
                    <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        
        <div class="grid">
            <!-- Random Number Generator -->
            <div class="card">
                <h2>ğŸ¯ Random Number (1 to Max)</h2>
                <div class="input-group">
                    <label for="maxValue">Maximum Value:</label>
                    <input type="number" id="maxValue" value="100" min="1">
                </div>
                <button onclick="getRandomNumber()">Generate Random Number</button>
                <div id="randomResult" class="result"></div>
            </div>

            <!-- Random Number Between -->
            <div class="card">
                <h2>ğŸ“Š Random Number Between</h2>
                <div style="display: flex; gap: 10px;">
                    <div class="input-group" style="flex: 1;">
                        <label for="minValue">Minimum:</label>
                        <input type="number" id="minValue" value="1" min="1" max="1000000">
                    </div>
                    <div class="input-group" style="flex: 1;">
                        <label for="maxValueBetween">Maximum:</label>
                        <input type="number" id="maxValueBetween" value="99" min="1" max="1000000">
                    </div>
                </div>
                <button onclick="getRandomBetween()">Generate Random Number</button>
                <div id="randomBetweenResult" class="result"></div>
            </div>

            <!-- Add Item -->
            <div class="card">
                <h2>ğŸ“‹ Add New Items</h2>
                <div class="input-group">
                    <label for="itemName">Item Name(s):</label>
                    <input type="text" id="itemName" placeholder="Enter item(s), separate with commas" maxlength="500">
                </div>
                <p style="color: var(--text-muted); font-size: 12px; margin-top: -8px; margin-bottom: 12px;">Add single item or multiple items separated by commas</p>
                <button onclick="addItem()">Add Item(s)</button>
                <div id="addItemResult" class="result"></div>
            </div>
        </div>

        <!-- Quick Add Presets -->
        <div class="card">
            <h2>âš¡ Quick Add Presets</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 13px; line-height: 1.5;">Populate your list with pre-configured item sets</p>
            <div class="preset-buttons">
                <button onclick="addPresetList('names')">ğŸ‘¥ Names</button>
                <button onclick="addPresetList('phonetic')">ğŸ“» Phonetic</button>
                <button onclick="addPresetList('flavors')">ğŸ Flavors</button>
                <button onclick="addPresetList('colors')">ğŸ¨ Colors</button>
                <button onclick="addPresetList('planets')">ğŸª Planets</button>
                <button onclick="addPresetList('animals')">ğŸ¶ Animals</button>
                <button onclick="addPresetList('months')">ğŸ“… Months</button>
                <button onclick="addPresetList('weekdays')">ğŸ“† Weekdays</button>
                <button onclick="addPresetList('states')">ğŸ—ºï¸ US States</button>
                <button onclick="addPresetList('countries')">ğŸŒ Countries</button>
                <!-- <button onclick="addPresetList('languages')">ğŸ’» Languages</button> -->
                <button onclick="addPresetList('zodiac')">â™ˆ Zodiac</button>
                <button onclick="addPresetList('emojis')">ğŸ˜„ Emojis</button>
            </div>
            <div id="presetResult" class="result" style="display: none;"></div>
        </div>

        <!-- Items Management -->
        <div class="card">
            <h2>ğŸ“‹ Items Management</h2>
            <div style="display: flex; gap: 10px; margin-bottom: 16px;">
                <button class="btn-pick" onclick="pickRandomItem()" style="flex: 1; margin-top: 0;">ğŸ¯ Pick Random</button>
                <button class="btn-shuffle" onclick="getShuffledItems()" style="flex: 1; margin-top: 0;">ğŸ² Shuffle All</button>
                <button class="btn-delete" onclick="emptyList()" style="flex: 1; margin-top: 0;">ğŸ—‘ï¸ Empty List</button>
            </div>
            <div id="randomPickResult" style="display: none;" class="result"></div>

            
            <div class="items-container">
                <div class="items-column">
                    <h3>Original Order</h3>
                    <div id="itemsList" class="items-list"></div>
                </div>
                <div class="items-column">
                    <h3>Shuffled Order</h3>
                    <div id="shuffledResult"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;

        // Theme Management
        function toggleTheme() {
            const body = document.body;
            const toggle = document.getElementById('themeToggle');
            
            if (toggle.checked) {
                body.classList.add('dark-theme');
                localStorage.setItem('theme', 'dark');
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('theme', 'light');
            }
        }

        // Load saved theme on page load
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const toggle = document.getElementById('themeToggle');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                toggle.checked = true;
            }
        }

        // Preset lists
        const PRESET_LISTS = {
            names: ['Alex', 'Blake', 'Chris', 'Cameron', 'Dylan', 'Elliott', 'Flynn', 'Gene', 'Hunter', 'Ira', 'Jaime', 'Kai', 'Logan', 'Morgan', 'Nico', 'Ollie', 'Parker', 'Peyton', 'Quinn', 'Riley', 'Sam', 'Sarah', 'Skyler', 'Taylor', 'Uriah', 'Val', 'Wyatt', 'Xi', 'Yolanda', 'Zion'],
            phonetic: ['Alpha', 'Bravo', 'Charlie', 'Delta', 'Echo', 'Foxtrot', 'Golf', 'Hotel', 'India', 'Juliet', 'Kilo', 'Lima', 'Mike', 'November', 'Oscar', 'Papa', 'Quebec', 'Romeo', 'Sierra', 'Tango', 'Uniform', 'Victor', 'Whiskey', 'X-ray', 'Yankee', 'Zulu'],
            flavors: ['ğŸ Apple', 'ğŸŠ Orange', 'ğŸ‹ Lemon', 'ğŸŒ Banana', 'ğŸ‰ Watermelon', 'ğŸ‡ Grape', 'ğŸ“ Strawberry', 'ğŸ« Blueberry', 'ğŸ‘ Peach', 'ğŸ¥ Kiwi', 'ğŸ’ Cherry', 'ğŸ¥‘ Avocado', 'ğŸ«’ Olive'],
            colors: ['ğŸ”´ Red', 'ğŸ”µ Blue', 'ğŸŸ¢ Green', 'ğŸŸ¡ Yellow', 'ğŸŸ£ Purple', 'ğŸŸ  Orange', 'ğŸ©· Pink', 'ğŸ©µ Cyan', 'âš«ï¸ Black', 'âšªï¸ White', 'ğŸŸ¤ Brown', 'ğŸ©¶ Grey', 'ğŸŒˆ Rainbow'],
            planets: ['Mercury', 'Venus', 'Earth', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune'],
            animals: ['ğŸ¶ Dog', 'ğŸ± Cat', 'ğŸ­ Mouse', 'ğŸ¹ Hamster', 'ğŸ° Rabbit', 'ğŸ¦Š Fox', 'ğŸ» Bear', 'ğŸ¼ Panda', 'ğŸ¨ Koala', 'ğŸ¯ Tiger', 'ğŸ¦ Lion'],
            months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            weekdays: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
            states: ['California', 'Texas', 'Florida', 'New York', 'Pennsylvania', 'Illinois', 'Ohio', 'Georgia', 'North Carolina', 'Michigan', 'Tennessee', 'Indiana', 'Missouri', 'Maryland', 'Wisconsin', 'Colorado', 'Minnesota', 'South Carolina', 'Alabama', 'Louisiana'],
            countries: ['ğŸ‡ºğŸ‡¸ United States', 'ğŸ‡¨ğŸ‡¦ Canada', 'ğŸ‡²ğŸ‡½ Mexico', 'ğŸ‡§ğŸ‡· Brazil', 'ğŸ‡¬ğŸ‡§ United Kingdom', 'ğŸ‡©ğŸ‡ª Germany', 'ğŸ‡«ğŸ‡· France', 'ğŸ‡®ğŸ‡¹ Italy', 'ğŸ‡ªğŸ‡¸ Spain', 'ğŸ‡¦ğŸ‡º Australia', 'ğŸ‡®ğŸ‡³ India', 'ğŸ‡¨ğŸ‡³ China', 'ğŸ‡¯ğŸ‡µ Japan', 'ğŸ‡°ğŸ‡· Korea', 'ğŸ‡«ğŸ‡® Finland', 'ğŸ… North Pole', 'ğŸ‡®ğŸ‡ª Ireland', 'ğŸ‡¨ğŸ‡­ Switzerland', 'ğŸ‡®ğŸ‡¸ Iceland'],
            languages: ['Python', 'JavaScript', 'Java', 'C++', 'C#', 'Ruby', 'Go', 'Rust', 'TypeScript', 'Swift'],
            zodiac: ['â™ˆ Aries', 'â™‰ Taurus', 'â™Š Gemini', 'â™‹ Cancer', 'â™Œ Leo', 'â™ Virgo', 'â™ Libra', 'â™ Scorpio', 'â™ Sagittarius', 'â™‘ Capricorn', 'â™’ Aquarius', 'â™“ Pisces'],
            emojis: ['ğŸ˜€ Grinning Face', 'ğŸ˜‚ Face with Tears of Joy', 'ğŸ˜ Smiling Face with Heart-Eyes', 'ğŸ¤” Thinking Face', 'ğŸ˜ Smiling Face with Sunglasses', 'ğŸ˜­ Loudly Crying Face', 'ğŸ˜¡ Pouting Face', 'ğŸ‘ Thumbs Up', 'ğŸ™ Folded Hands', 'ğŸ‰ Party Popper', 'ğŸ‘€ Eyes', 'â¤ï¸ Red Heart', 'ğŸ”¥ Fire', 'âœ¨ Sparkles', 'ğŸ’¯ Hundred Points', 'ğŸš€ Rocket', 'â­ Star', 'ğŸ’ª Flexed Biceps', 'ğŸ¯ Direct Hit', 'ğŸŒŸ Glowing Star', 'ğŸ’¡ Light Bulb', 'ğŸŠ Confetti Ball', 'ğŸ† Trophy', 'ğŸ Wrapped Gift', 'ğŸŒˆ Rainbow', 'ğŸ˜Š Smiling Face', 'ğŸ¤£ Rolling on the Floor Laughing', 'ğŸ˜… Grinning Face with Sweat', 'ğŸ¥° Smiling Face with Hearts', 'ğŸ˜˜ Face Blowing a Kiss', 'ğŸ˜œ Winking Face with Tongue', 'ğŸ¤— Hugging Face', 'ğŸ¤© Star-Struck', 'ğŸ¥³ Partying Face', 'ğŸ˜‡ Smiling Face with Halo', 'ğŸ¤ª Zany Face', 'ğŸ˜´ Sleeping Face', 'ğŸ¤¤ Drooling Face', 'ğŸ™„ Face with Rolling Eyes', 'ğŸ˜¬ Grimacing Face', 'ğŸ¤ Zipper-Mouth Face', 'ğŸ¤« Shushing Face', 'ğŸ¤“ Nerd Face', 'ğŸ˜ˆ Smiling Face with Horns', 'ğŸ‘» Ghost', 'ğŸ‘½ Alien', 'ğŸ¤– Robot', 'ğŸ’€ Skull', 'ğŸ‘ Clapping Hands', 'ğŸ¤ Handshake', 'âœŒï¸ Victory Hand', 'ğŸ¤ Crossed Fingers', 'ğŸ‘Œ OK Hand', 'âœŠ Raised Fist', 'ğŸ‘Š Oncoming Fist', 'ğŸ™Œ Raising Hands', 'ğŸ’– Sparkling Heart', 'ğŸ’™ Blue Heart', 'ğŸ’š Green Heart', 'ğŸ’› Yellow Heart', 'ğŸ§¡ Orange Heart', 'ğŸ’œ Purple Heart', 'ğŸ–¤ Black Heart', 'ğŸ¤ White Heart', 'ğŸ’” Broken Heart', 'ğŸ’ Heart with Ribbon', 'ğŸ’˜ Heart with Arrow', 'â˜€ï¸ Sun', 'ğŸŒ™ Crescent Moon', 'âš¡ High Voltage', 'â˜ï¸ Cloud', 'â„ï¸ Snowflake', 'ğŸŒ¸ Cherry Blossom', 'ğŸŒº Hibiscus', 'ğŸŒ» Sunflower', 'ğŸŒ¹ Rose', 'ğŸ• Pizza', 'ğŸ” Hamburger', 'ğŸŸ French Fries', 'ğŸŒ® Taco', 'ğŸ£ Sushi', 'ğŸ© Doughnut', 'ğŸª Cookie', 'ğŸ‚ Birthday Cake', 'ğŸ° Shortcake', 'â˜• Hot Beverage', 'ğŸº Beer Mug', 'ğŸ® Video Game', 'ğŸ¸ Guitar', 'ğŸ¤ Microphone', 'ğŸ§ Headphone', 'ğŸ“± Mobile Phone', 'ğŸ’» Laptop', 'âŒš Watch', 'ğŸ“· Camera', 'ğŸ¬ Clapper Board', 'ğŸ¨ Artist Palette', 'âš½ Soccer Ball', 'ğŸ€ Basketball', 'ğŸ¾ Tennis', 'ğŸˆ American Football', 'âš¾ Baseball', 'ğŸ³ Bowling', 'â™ ï¸ Spade Suit', 'â™¥ï¸ Heart Suit', 'â™¦ï¸ Diamond Suit', 'â™£ï¸ Club Suit']
        };

        // Add preset list
        async function addPresetList(listType) {
            const items = PRESET_LISTS[listType];
            const resultDiv = document.getElementById('presetResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.innerHTML = '<p style="color: #6b7280;">Adding items...</p>';
            
            let addedCount = 0;
            let skippedCount = 0;
            const errors = [];

            for (const item of items) {
                try {
                    const response = await fetch(`${API_BASE}/items`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ name: item })
                    });
                    
                    if (response.ok) {
                        addedCount++;
                    } else {
                        const data = await response.json();
                        if (data.detail && data.detail.includes('already exists')) {
                            skippedCount++;
                        } else {
                            errors.push(`${item}: ${data.detail}`);
                        }
                    }
                } catch (error) {
                    errors.push(`${item}: ${error.message}`);
                }
            }

            // Show results
            let message = '';
            if (addedCount > 0) message += `âœ“ Added ${addedCount} item${addedCount > 1 ? 's' : ''}. `;
            if (skippedCount > 0) message += `âš ï¸ Skipped ${skippedCount} duplicate${skippedCount > 1 ? 's' : ''}. `;
            if (errors.length > 0) message += `âŒ ${errors.length} error${errors.length > 1 ? 's' : ''}.`;

            resultDiv.className = addedCount > 0 ? 'result success' : 'result error';
            resultDiv.innerHTML = `<p>${message}</p>`;

            if (addedCount > 0) {
                loadItems();
            }

            // Hide after 3 seconds
            setTimeout(() => {
                resultDiv.style.display = 'none';
            }, 3000);
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString('en-US');
        }

        // Random Number (1 to Max)
        async function getRandomNumber() {
            const maxValue = document.getElementById('maxValue').value;
            const resultDiv = document.getElementById('randomResult');
            
            // Show loading state
            resultDiv.className = 'result';
            resultDiv.innerHTML = '<div class="processing"><div class="spinner"></div><p>Generating...</p></div>';
            
            try {
                const response = await fetch(`${API_BASE}/random/${maxValue}`);
                const data = await response.json();
                
                if (response.ok) {
                    // Small delay to show animation
                    setTimeout(() => {
                        resultDiv.className = 'result success';
                        resultDiv.innerHTML = `<div class="result-number animating">${formatNumber(data.random_number)}</div>
                                              <div style="text-align: center; margin-top: 10px;">
                                              Random number between 1 and ${formatNumber(data.max)}</div>`;
                    }, 300);
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
            }
        }

        // Random Number Between
        async function getRandomBetween() {
            const minValue = document.getElementById('minValue').value;
            const maxValue = document.getElementById('maxValueBetween').value;
            const resultDiv = document.getElementById('randomBetweenResult');
            
            // Show loading state
            resultDiv.className = 'result';
            resultDiv.innerHTML = '<div class="processing"><div class="spinner"></div><p>Generating...</p></div>';
            
            try {
                const response = await fetch(`${API_BASE}/random-between?min_value=${minValue}&max_value=${maxValue}`);
                const data = await response.json();
                
                if (response.ok) {
                    // Small delay to show animation
                    setTimeout(() => {
                        resultDiv.className = 'result success';
                        resultDiv.innerHTML = `<div class="result-number animating">${formatNumber(data.random_number)}</div>
                                              <div style="text-align: center; margin-top: 10px;">
                                              Random number between ${formatNumber(data.min)} and ${formatNumber(data.max)}</div>`;
                    }, 300);
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
            }
        }

        // Add Item(s)
        async function addItem() {
            const itemInput = document.getElementById('itemName').value.trim();
            const resultDiv = document.getElementById('addItemResult');
            
            if (!itemInput) {
                resultDiv.className = 'result error';
                resultDiv.textContent = 'Please enter at least one item name';
                return;
            }
            
            // Split by comma and clean up each item
            const items = itemInput.split(',').map(item => item.trim()).filter(item => item.length > 0);
            
            if (items.length === 0) {
                resultDiv.className = 'result error';
                resultDiv.textContent = 'Please enter valid item names';
                return;
            }
            
            // Show processing state
            resultDiv.className = 'result';
            resultDiv.textContent = `Adding ${items.length} item${items.length > 1 ? 's' : ''}...`;
            
            let addedCount = 0;
            let skippedCount = 0;
            const errors = [];
            
            try {
                for (const itemName of items) {
                    if (itemName.length > 100) {
                        errors.push(`"${itemName.substring(0, 20)}..." is too long (max 100 characters)`);
                        continue;
                    }
                    
                    try {
                        const response = await fetch(`${API_BASE}/items`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ name: itemName })
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            addedCount++;
                        } else {
                            if (data.detail && data.detail.includes('already exists')) {
                                skippedCount++;
                            } else {
                                errors.push(`"${itemName}": ${data.detail}`);
                            }
                        }
                    } catch (error) {
                        errors.push(`"${itemName}": ${error.message}`);
                    }
                }
                
                // Show results
                let message = '';
                if (addedCount > 0) message += `âœ“ Added ${addedCount} item${addedCount > 1 ? 's' : ''}. `;
                if (skippedCount > 0) message += `âš ï¸ Skipped ${skippedCount} duplicate${skippedCount > 1 ? 's' : ''}. `;
                if (errors.length > 0) message += `âŒ ${errors.length} error${errors.length > 1 ? 's' : ''}: ${errors.join(', ')}`;
                
                resultDiv.className = addedCount > 0 ? 'result success' : 'result error';
                resultDiv.textContent = message || 'No items were added';
                
                if (addedCount > 0) {
                    document.getElementById('itemName').value = '';
                    loadItems();
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
            }
        }

        // Load Items
        async function loadItems() {
            const itemsList = document.getElementById('itemsList');
            
            try {
                const response = await fetch(`${API_BASE}/items`);
                const data = await response.json();
                
                if (response.ok) {
                    if (data.original_order.length === 0) {
                        itemsList.innerHTML = '<div class="empty-state"><p>No items yet. Add some items above to get started!</p></div>';
                    } else {
                        itemsList.innerHTML = data.original_order.map(item => `
                            <div class="item">
                                <span><strong>${item}</strong></span>
                                <div class="item-buttons">
                                    <button class="btn-update" onclick="updateItem('${item}')">âœï¸ Edit</button>
                                    <button class="btn-delete" onclick="deleteItem('${item}')">ğŸ—‘ï¸ Delete</button>
                                </div>
                            </div>
                        `).join('');
                    }
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                itemsList.innerHTML = `<p class="result error">Error loading items: ${error.message}</p>`;
            }
        }

        // Update Item
        async function updateItem(oldName) {
            const newName = prompt(`Update "${oldName}" to:`, oldName);
            
            if (!newName || newName === oldName) return;
            
            try {
                const response = await fetch(`${API_BASE}/items/${encodeURIComponent(oldName)}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ name: newName })
                });
                const data = await response.json();
                
                if (response.ok) {
                    alert(`âœ“ ${data.message}`);
                    loadItems();
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        // Delete Item
        async function deleteItem(itemName) {
            if (!confirm(`Are you sure you want to delete "${itemName}"?`)) return;
            
            try {
                const response = await fetch(`${API_BASE}/items/${encodeURIComponent(itemName)}`, {
                    method: 'DELETE'
                });
                const data = await response.json();
                
                if (response.ok) {
                    alert(`âœ“ ${data.message}`);
                    loadItems();
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        // Pick Random Item
        async function pickRandomItem() {
            const resultDiv = document.getElementById('randomPickResult');
            
            try {
                const response = await fetch(`${API_BASE}/items`);
                const data = await response.json();
                
                if (response.ok) {
                    if (data.count === 0) {
                        resultDiv.style.display = 'block';
                        resultDiv.className = 'result error';
                        resultDiv.innerHTML = '<p>No items available. Add some items first!</p>';
                    } else {
                        // Pick a random item
                        const randomIndex = Math.floor(Math.random() * data.original_order.length);
                        const pickedItem = data.original_order[randomIndex];
                        
                        resultDiv.style.display = 'block';
                        resultDiv.className = 'result success';
                        resultDiv.innerHTML = `
                            <div class="random-pick-result animating">${pickedItem}</div>
                            <p style="text-align: center; color: var(--text-muted);">Randomly selected from ${data.count} item${data.count > 1 ? 's' : ''}</p>
                        `;
                    }
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                resultDiv.style.display = 'block';
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `<p>Error: ${error.message}</p>`;
            }
        }

        // Get Shuffled Items
        async function getShuffledItems() {
            const resultDiv = document.getElementById('shuffledResult');
            
            // Show loading state
            resultDiv.innerHTML = '<div class="shuffling-indicator"><div class="shuffle-spinner"></div><p>Shuffling items...</p></div>';
            
            try {
                const response = await fetch(`${API_BASE}/items`);
                const data = await response.json();
                
                if (response.ok) {
                    if (data.count === 0) {
                        resultDiv.innerHTML = '<div class="empty-state"><p>No items to shuffle yet!</p></div>';
                    } else {
                        // Add delay to show shuffle animation
                        setTimeout(() => {
                            resultDiv.innerHTML = `
                                <div class="items-list">
                                    ${data.randomized_order.map((item, index) => `
                                        <div class="item shuffle-animate" style="animation-delay: ${index * 0.05}s">
                                            <span><strong>${index + 1}. ${item}</strong></span>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                        }, 500);
                    }
                } else {
                    throw new Error(data.detail);
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="result error">Error: ${error.message}</p>`;
            }
        }

        // Empty List - Delete all items
        async function emptyList() {
            try {
                const response = await fetch(`${API_BASE}/items`);
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.detail);
                }

                if (data.original_order.length === 0) {
                    alert('The list is already empty!');
                    return;
                }

                if (!confirm(`Are you sure you want to delete all ${data.original_order.length} items?`)) {
                    return;
                }

                let deletedCount = 0;
                const errors = [];

                for (const item of data.original_order) {
                    try {
                        const delResponse = await fetch(`${API_BASE}/items/${encodeURIComponent(item)}`, {
                            method: 'DELETE'
                        });
                        
                        if (delResponse.ok) {
                            deletedCount++;
                        } else {
                            const delData = await delResponse.json();
                            errors.push(`${item}: ${delData.detail}`);
                        }
                    } catch (error) {
                        errors.push(`${item}: ${error.message}`);
                    }
                }

                if (errors.length > 0) {
                    alert(`Deleted ${deletedCount} items, but ${errors.length} failed:\n${errors.join('\n')}`);
                } else {
                    alert(`âœ“ Successfully deleted all ${deletedCount} items!`);
                }

                loadItems();
                document.getElementById('shuffledResult').innerHTML = '';
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        // Load items and theme on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            loadItems();
        });
    </script>
</body>
</html>
